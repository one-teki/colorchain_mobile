<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <!-- Viewport meta that supports safe-area insets for devices with notches -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ColorChain（カラーチェーン）</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase App (the core Firebase SDK) -->
    <!-- TODO: Replace the placeholder config values with your own Firebase project configuration. -->
    <!--
        Use the compat versions of the Firebase SDK for GitHub Pages.  The standard
        ESM builds (firebase-app.js / firebase-firestore.js) export ES modules
        which cannot be imported from a plain <script> tag.  The compat builds
        attach the firebase namespace to window and provide the same API as the
        modular version, so you can call firebase.initializeApp() and
        firebase.firestore() without additional tooling.
    -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <div id="app">
        <h1>ColorChain</h1>
        <!--
            Scoreboard layout improvements

            The original scoreboard displayed seven separate items in a single column on very small screens,
            which could push the game board down and reduce visibility.  To make the information more compact
            and easier to read on mobile devices, the scoreboard has been condensed into four panels.  Each
            panel groups related metrics on two lines:

            - Remaining time (seconds)
            - Score and current chain multiplier
            - Longest chain achieved and chain length currently being drawn
            - High score (HS) and best chain (BC) across sessions

            The element IDs remain the same so the game logic continues to update the correct spans.
        -->
        <!--
            Premium scoreboard layout

            The scoreboard has been redesigned to present each statistic in a clear
            card-like panel with descriptive labels.  A flexbox layout ensures the
            three panels sit side by side on typical smartphone screens but wrap
            gracefully on very narrow viewports.  Each panel contains two rows:
            a label and its corresponding value.  Chain multiplier shows the
            multiplier value followed by “x” for clarity.
        -->
        <div id="info">
            <!-- Score and chain multiplier -->
            <div class="info-item">
                <div class="label">スコア</div>
                <div class="value"><span id="score">0</span></div>
                <div class="label">連鎖倍率</div>
                <div class="value"><span id="chain">1</span>x</div>
            </div>
            <!-- Chain statistics -->
            <div class="info-item">
                <div class="label">最大チェーン</div>
                <div class="value"><span id="maxChain">0</span></div>
                <div class="label">現在チェーン</div>
                <div class="value"><span id="currentChain">0</span></div>
            </div>
            <!-- Record statistics -->
            <div class="info-item">
                <div class="label">ハイスコア</div>
                <div class="value"><span id="bestScore">0</span></div>
                <div class="label">ベストチェーン</div>
                <div class="value"><span id="bestChain">0</span></div>
            </div>
        </div>
        <!-- Hidden time element to preserve update logic. The script updates this span but it is not visible. -->
        <span id="time" style="display:none;">60</span>
        <!-- Time bar container -->
        <div id="timeBarContainer"><div id="timeBar"></div></div>
        <div id="board"></div>
        <div id="message"></div>
    </div>
    <!-- Overlay for onboarding and results -->
        <div id="overlay" class="overlay">
        <div class="modal">
            <h2 id="overlayTitle">遊び方</h2>
            <ul id="overlayInstructions">
                <li>同じ色のタイルを3つ以上なぞって消そう！</li>
                <li>長くつなげるほどスコアアップ！</li>
                <li>角を曲がるとさらにボーナス！</li>
                <li>連続で消すほど倍率アップ！</li>
                <li>60秒でハイスコアを目指せ！</li>
            </ul>
            <div id="finalScore" style="display:none; margin-bottom:10px;"></div>
                <!-- Container for displaying global high score ranking -->
                <div id="globalRanking" style="display:none; margin-bottom:10px;"></div>
            <button id="playButton">スタート</button>
            <button id="replayButton" style="display:none;">もう一回遊ぶ</button>
            <button id="shareButtonModal" style="display:none;">結果をシェア</button>
        </div>
    </div>
    <!-- Cut-in overlay for board refresh -->
    <div id="breakCutIn" class="cutin hidden">BREAK</div>
    <script src="script.js"></script>
</body>
</html>