<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <!-- Viewport meta that supports safe-area insets for devices with notches -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ColorChain（カラーチェーン）</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <h1>ColorChain（カラーチェーン）</h1>
        <!--
            Scoreboard layout improvements

            The original scoreboard displayed seven separate items in a single column on very small screens,
            which could push the game board down and reduce visibility.  To make the information more compact
            and easier to read on mobile devices, the scoreboard has been condensed into four panels.  Each
            panel groups related metrics on two lines:

            - Remaining time (seconds)
            - Score and current chain multiplier
            - Longest chain achieved and chain length currently being drawn
            - High score (HS) and best chain (BC) across sessions

            The element IDs remain the same so the game logic continues to update the correct spans.
        -->
        <div id="info">
            <!-- Score and multiplier share a cell -->
            <div class="info-item">
                スコア: <span id="score">0</span><br>
                倍率: <span id="chain">1</span>
            </div>
            <!-- Longest chain and current chain share a cell -->
            <div class="info-item">
                最大: <span id="maxChain">0</span><br>
                現在: <span id="currentChain">0</span>
            </div>
            <!-- Best score and best chain share a cell -->
            <div class="info-item">
                HS: <span id="bestScore">0</span><br>
                BC: <span id="bestChain">0</span>
            </div>
        </div>
        <!-- Hidden time element to preserve update logic. The script updates this span but it is not visible. -->
        <span id="time" style="display:none;">60</span>
        <!-- Time bar container -->
        <div id="timeBarContainer"><div id="timeBar"></div></div>
        <div id="board"></div>
        <div id="message"></div>
    </div>
    <!-- Overlay for onboarding and results -->
    <div id="overlay" class="overlay">
        <div class="modal">
            <h2 id="overlayTitle">遊び方</h2>
            <ul id="overlayInstructions">
                <li>同じ色のタイルを3つ以上なぞって消そう！</li>
                <li>長くつなげるほどスコアアップ！</li>
                <li>角を曲がるとさらにボーナス！</li>
                <li>連続で消すほど倍率アップ！</li>
                <li>60秒でハイスコアを目指せ！</li>
            </ul>
            <div id="finalScore" style="display:none; margin-bottom:10px;"></div>
            <button id="playButton">スタート</button>
            <button id="replayButton" style="display:none;">もう一回遊ぶ</button>
            <button id="shareButtonModal" style="display:none;">結果をシェア</button>
        </div>
    </div>
    <!-- Cut-in overlay for board refresh -->
    <div id="breakCutIn" class="cutin hidden">BREAK</div>
    <script src="script.js"></script>
</body>
</html>